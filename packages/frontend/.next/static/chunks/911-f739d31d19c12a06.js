"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[911],{2911:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(2322),a=n(2784),l=n(2578),s=n(6122);function i(e){let{onClose:t}=e,[n,i]=(0,a.useState)([]),[r,c]=(0,a.useState)(new Set),[d,u]=(0,a.useState)("initial"),[m,h]=(0,a.useState)(""),[p,w]=(0,a.useState)("");(0,s.S)();let g=(0,a.useRef)(!1),f=(0,a.useRef)(new Set),y=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{if(!e){console.log("Phantom wallet disconnected");return}let t=e.toString();if(console.log("Phantom wallet account changed:",t),f.current.has(t)){if("listening"===d){let e="".concat(t.substring(0,6),"...").concat(t.substring(t.length-4));w("Wallet ".concat(e," already detected. Try switching to a different wallet in Phantom."))}}else{let e="".concat(t.substring(0,6),"...").concat(t.substring(t.length-4)),o={id:"phantom-".concat(t),address:t,displayAddress:e,type:"phantom",name:"Phantom Wallet ".concat(n.length+1)};i(e=>[...e,o]),f.current.add(t),c(e=>{let t=new Set(e);return t.add(o.id),t}),"listening"===d&&(w("New wallet ".concat(e," detected!")),u("selecting"))}};return window.solana&&window.solana.isPhantom&&(console.log("Setting up Phantom account change listener"),y.current=e,window.solana.on("accountChanged",e),window.solana.isConnected&&window.solana.publicKey&&e(window.solana.publicKey)),()=>{window.solana&&window.solana.isPhantom&&y.current&&(console.log("Removing Phantom account change listener"),window.solana.off("accountChanged",y.current),y.current=null)}},[d,n.length]);let x=e=>{c(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},b=async()=>{try{if(h(""),w("Connecting to Phantom wallet..."),u("detecting"),!window.solana||!window.solana.isPhantom){h("Phantom wallet not detected. Please install Phantom extension first."),u("error");return}let e=v();if(e.length>0){w("Found ".concat(e.length," previously connected Phantom ").concat(e.length>1?"wallets":"wallet","!"));let t=e.map(e=>{let t="".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)),o={id:"phantom-".concat(e),address:e,displayAddress:t,type:"phantom",name:"Phantom Wallet ".concat(n.length+1)};return f.current.has(e)?null:(f.current.add(e),o)}),o=(await Promise.all(t)).filter(Boolean);o.length>0&&(i(e=>[...e,...o]),c(e=>{let t=new Set(e);return o.forEach(e=>t.add(e.id)),t})),w("Connecting to current Phantom wallet...")}await j()}catch(e){console.error("Error starting wallet detection:",e),h("Failed to start detection: ".concat(e.message||"Unknown error")),u("error")}},v=()=>{try{var e;let t=JSON.parse(localStorage.getItem("phantomDiscoveredWallets")||"[]"),n=JSON.parse(localStorage.getItem("phantomWalletState")||"{}"),o=JSON.parse(localStorage.getItem("walletData")||'{"wallets":{}}'),a=(null==o?void 0:null===(e=o.wallets)||void 0===e?void 0:e.phantom)||[];return[...new Set([...t,...a,...Object.keys(n)])]}catch(e){return console.error("Error getting stored Phantom wallets:",e),[]}},j=async()=>{try{g.current=!0,w("Opening Phantom wallet selection popup..."),console.log("Requesting Phantom wallet connection...");let e=null;window.solana.isConnected&&window.solana.publicKey?(e={publicKey:window.solana.publicKey},console.log("Already connected to Phantom wallet")):(e=await window.solana.connect({onlyIfTrusted:!1}),console.log("Connection response:",e));let t=e.publicKey.toString();console.log("Connected to wallet:",t);let o="".concat(t.substring(0,6),"...").concat(t.substring(t.length-4));try{let e=new TextEncoder().encode("Proof of Funds: Wallet Detection\n\nThis signature confirms this wallet for multi-wallet use. You can select additional wallets after this step.\n\nWallet: ".concat(o)),t=window.solana.signMessage(e,"utf8"),n=new Promise((e,t)=>setTimeout(()=>t(Error("Signature request timed out")),15e3));await Promise.race([t,n]).catch(e=>{console.log("Message signing skipped:",e.message)})}catch(e){console.log("User declined to sign the message or signing failed:",e)}if(f.current.has(t))w("Wallet ".concat(o," is already detected."));else{let e={id:"phantom-".concat(t),address:t,displayAddress:o,type:"phantom",name:"Phantom Wallet ".concat(n.length+1)};i(t=>[...t,e]),f.current.add(t),c(t=>{let n=new Set(t);return n.add(e.id),n}),w("Wallet ".concat(o," detected successfully!"))}u("selecting"),g.current=!1}catch(e){console.error("Error detecting wallet:",e),h(C(e)),u("selecting"),g.current=!1}},C=e=>{var t;return 4001===e.code?"Connection request was rejected. Please approve the connection in the Phantom popup.":-32002===e.code?"A connection request is already pending. Please check your Phantom wallet extension.":-32603===e.code?"Phantom extension encountered an internal error. Please try refreshing the page.":"WalletConnectionError"===e.name?"Unable to connect to Phantom wallet. Please ensure the extension is installed and unlocked.":(null===(t=e.message)||void 0===t?void 0:t.includes("disconnected port"))?"Connection to Phantom was interrupted. This often happens when another wallet extension is also active. Try disabling other wallet extensions temporarily.":"Connection failed: ".concat(e.message||"Unknown error",". Try refreshing the page or restarting your browser.")},k=async()=>{try{if(u("listening"),w("Opening Phantom wallet and waiting for wallet changes..."),window.solana&&window.solana.isPhantom)try{if(console.log("Attempting to open Phantom wallet selector..."),window.solana.isConnected&&window.solana.publicKey)try{Date.now();let e=new TextEncoder().encode("Proof of Funds: Wallet Selection\n\nPlease use the Phantom extension to switch to a different wallet you'd like to detect.\n\nAfter confirming this message, you can switch wallets using the dropdown in the Phantom extension.");window.solana.signMessage(e,"utf8").catch(e=>{console.log("Signature dialogue shown:",e)}),console.log("Signature request sent to open Phantom wallet"),w("Please change wallets in your Phantom extension. We'll automatically detect the new wallet.")}catch(e){console.error("Failed to open wallet with signature:",e);try{await window.solana.disconnect(),await new Promise(e=>setTimeout(e,500)),window.solana.connect({onlyIfTrusted:!1}).catch(e=>{console.log("Connection prompt displayed via fallback:",e)}),w("Please change wallets in your Phantom extension. We'll automatically detect the new wallet.")}catch(e){console.error("Fallback method failed:",e),w("Please open your Phantom extension manually and switch wallets.")}}else window.solana.connect({onlyIfTrusted:!1}).catch(e=>{console.log("Connection prompt displayed for new connection:",e)}),w("Please change wallets in your Phantom extension. We'll automatically detect the new wallet.")}catch(e){console.error("Error opening Phantom wallet:",e),w("Please open your Phantom wallet extension manually and switch wallets.")}else h("Phantom wallet not detected. Please install the Phantom extension first."),u("error")}catch(e){console.error("Error starting wallet detection:",e),h("Failed to start wallet detection: ".concat(e.message||"Unknown error")),u("error")}};return(0,a.useEffect)(()=>()=>{f.current.clear()},[]),(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsx)("h2",{className:"text-xl font-bold",children:"Connect Phantom Wallets"}),(0,o.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-2","aria-label":"Close",children:"✕"})]}),n.length>0&&"success"!==d&&(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,o.jsxs)("h3",{className:"font-medium text-lg",children:["Detected Wallets (",n.length,")"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,o.jsx)("button",{onClick:()=>{c(new Set(n.map(e=>e.id)))},className:"text-blue-600 hover:text-blue-800",children:"Select All"}),(0,o.jsx)("span",{children:"|"}),(0,o.jsx)("button",{onClick:()=>{c(new Set)},className:"text-blue-600 hover:text-blue-800",children:"Deselect All"})]})]}),(0,o.jsx)("div",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto pr-1",children:n.map(e=>(0,o.jsxs)("div",{className:"p-3 rounded-md border flex items-center justify-between cursor-pointer transition-colors ".concat(r.has(e.id)?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200"),onClick:()=>x(e.id),children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-full flex items-center justify-center text-xs mr-3 flex-shrink-0",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,o.jsx)("path",{d:"M18.9,8.5H5.1c-1.6,0-2.8,1.3-2.8,2.8v5.4c0,1.6,1.3,2.8,2.8,2.8h13.7c1.6,0,2.8-1.3,2.8-2.8v-5.4C21.7,9.8,20.4,8.5,18.9,8.5z M12,15.3c-0.9,0-1.6-0.7-1.6-1.6s0.7-1.6,1.6-1.6s1.6,0.7,1.6,1.6S12.9,15.3,12,15.3z M18.5,9.9c-0.2,0-0.4-0.2-0.4-0.4s0.2-0.4,0.4-0.4s0.4,0.2,0.4,0.4S18.7,9.9,18.5,9.9z"}),(0,o.jsx)("path",{d:"M17.7,4.5L17.7,4.5l-3.8,0c-0.2,0-0.4,0.2-0.4,0.4s0.2,0.4,0.4,0.4l3.8,0c0.2,0,0.4-0.2,0.4-0.4S17.9,4.5,17.7,4.5z"})]})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-mono text-sm truncate",children:e.displayAddress}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"Phantom Wallet"})]})]}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("div",{className:"w-5 h-5 border rounded-md flex items-center justify-center ".concat(r.has(e.id)?"bg-blue-600 border-blue-600":"bg-white border-gray-300"),children:r.has(e.id)&&(0,o.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]},e.id))})]}),"initial"===d&&(0,o.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md mb-6",children:[(0,o.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"Detect Multiple Phantom Wallets"}),(0,o.jsx)("p",{className:"text-sm text-blue-700 mb-4",children:"Detect and select multiple Phantom wallets to use simultaneously in this app."}),(0,o.jsxs)("ol",{className:"list-decimal pl-5 text-sm text-blue-700 mb-4 space-y-2",children:[(0,o.jsx)("li",{children:'Click "Start Detection" to begin'}),(0,o.jsx)("li",{children:"Select a wallet when the Phantom popup appears"}),(0,o.jsx)("li",{children:"Find more wallets by switching directly in the Phantom extension"}),(0,o.jsx)("li",{children:"Select which detected wallets you want to connect"})]}),(0,o.jsx)("button",{onClick:b,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700",children:(0,o.jsxs)("span",{className:"flex items-center justify-center",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Start Detection"]})})]}),"detecting"===d&&(0,o.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("h3",{className:"font-medium text-blue-800",children:"Opening Wallet Selector"}),(0,o.jsx)("div",{className:"inline-block w-5 h-5 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"})]}),(0,o.jsx)("div",{className:"bg-white p-3 rounded-md border border-blue-100 mb-4",children:(0,o.jsx)("p",{className:"text-sm text-blue-800",children:p})}),(0,o.jsxs)("div",{className:"text-sm text-blue-700 mb-4",children:[(0,o.jsx)("p",{children:"When the Phantom popup appears:"}),(0,o.jsx)("p",{className:"mt-2",children:"1. Select the wallet you want to detect"}),(0,o.jsx)("p",{className:"mt-1",children:'2. Click "Connect" to approve the connection'})]})]}),"listening"===d&&(0,o.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsx)("h3",{className:"font-medium text-blue-800",children:"Listening for Wallet Changes"}),(0,o.jsx)("div",{className:"inline-block w-5 h-5 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"})]}),(0,o.jsx)("div",{className:"bg-white p-3 rounded-md border border-blue-100 mb-4",children:(0,o.jsx)("p",{className:"text-sm text-blue-800",children:p})}),(0,o.jsxs)("div",{className:"text-sm text-blue-700 mb-4",children:[(0,o.jsx)("p",{className:"font-medium mb-1",children:"To detect another wallet:"}),(0,o.jsxs)("ol",{className:"list-decimal pl-5 space-y-1 mt-2",children:[(0,o.jsx)("li",{children:"Open the Phantom browser extension"}),(0,o.jsx)("li",{children:"Click on the wallet icon in the top-right"}),(0,o.jsx)("li",{children:"Select a different wallet from your list"}),(0,o.jsx)("li",{children:'Or click "Add new wallet" to create/import one'})]})]}),(0,o.jsx)("button",{onClick:()=>u("selecting"),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700",children:(0,o.jsxs)("span",{className:"flex items-center justify-center",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Stop Listening"]})})]}),"selecting"===d&&(0,o.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md mb-6",children:[(0,o.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"Select Wallets to Connect"}),(0,o.jsx)("div",{className:"bg-white p-3 rounded-md border border-blue-100 mb-4",children:(0,o.jsx)("p",{className:"text-sm text-blue-800",children:p})}),(0,o.jsxs)("div",{className:"text-sm text-blue-700 mb-4",children:[(0,o.jsxs)("p",{className:"font-medium mb-1",children:[r.size," of ",n.length," wallets selected"]}),(0,o.jsx)("p",{children:"• Check the wallets you want to connect"}),(0,o.jsx)("p",{children:'• Click "Detect More Wallets" to find additional wallets'}),(0,o.jsx)("p",{children:'• Click "Connect Selected Wallets" when ready'})]}),(0,o.jsx)("div",{className:"flex gap-3 mb-3",children:(0,o.jsx)("button",{onClick:k,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700",children:(0,o.jsxs)("span",{className:"flex items-center justify-center",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Detect More Wallets"]})})}),(0,o.jsx)("button",{onClick:()=>{try{let e=n.filter(e=>r.has(e.id));if(0===e.length){h("No wallets were selected. Please select at least one wallet.");return}for(let t of(u("success"),w("Saving your selected wallets..."),e.map(e=>e.address)))(0,l.cF)("phantom",[t]);localStorage.setItem("userInitiatedConnection","true");let o=new CustomEvent("wallet-connection-changed",{detail:{timestamp:Date.now(),walletType:"phantom"}});window.dispatchEvent(o),console.log("Dispatched wallet-connection-changed event from PhantomMultiWalletSelector"),w("Successfully saved ".concat(e.length," wallet(s)!")),setTimeout(()=>{t()},1500)}catch(e){console.error("Error in finish process:",e),h("Error saving wallets: ".concat(e.message||"Unknown error")),u("error")}},disabled:0===r.size,className:"w-full px-4 py-2 text-white rounded-md font-medium ".concat(r.size>0?"bg-green-600 hover:bg-green-700":"bg-gray-400 cursor-not-allowed"),children:(0,o.jsxs)("span",{className:"flex items-center justify-center",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Connect ",r.size," Selected ",1===r.size?"Wallet":"Wallets"]})})]}),"success"===d&&(0,o.jsxs)("div",{className:"my-8 text-center text-green-600",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,o.jsxs)("p",{className:"text-lg font-medium",children:["Successfully connected ",r.size," wallet(s)!"]}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"You can now use all your connected Phantom wallets simultaneously."})]}),m&&(0,o.jsxs)("div",{className:"mb-6 p-4 bg-red-100 text-red-700 rounded-md",children:[m,"error"===d&&(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)("button",{onClick:()=>{h(""),u("initial")},className:"px-4 py-2 bg-red-600 text-white rounded-md font-medium hover:bg-red-700",children:"Try Again"})})]}),"success"!==d&&(0,o.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200 text-xs text-gray-500",children:[(0,o.jsx)("p",{className:"mb-1",children:(0,o.jsx)("strong",{children:"How wallet detection works:"})}),(0,o.jsx)("p",{children:"• We listen for wallet changes in the Phantom extension"}),(0,o.jsx)("p",{children:"• Simply switch wallets in Phantom to detect more"}),(0,o.jsx)("p",{children:"• Select which detected wallets you want to connect"}),(0,o.jsx)("p",{children:"• You'll be able to use all connected wallets simultaneously"})]})]})}n(1263);var r=n(2226);function c(e){let{onClose:t}=e;console.log("WalletSelector component rendered");let{connect:n,connectors:s}=(0,r.$4)(),c=(0,a.useRef)(null);(0,a.useEffect)(()=>{{window.wagmiConnect=n;let e=s.find(e=>"metaMask"===e.id);e?(window.wagmiMetaMaskConnector=e,console.log("MetaMask connector made available globally")):console.warn("MetaMask connector not found among wagmi connectors")}return()=>{delete window.wagmiConnect,delete window.wagmiMetaMaskConnector}},[n,s]);let[d,u]=(0,a.useState)([{id:"metamask",name:"MetaMask",chain:"Multi-Chain",supportedChains:["Ethereum","Polygon","BNB Chain"],isInstalled:!1,icon:(0,o.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 35 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M32.958 1L19.698 10.898L22.134 5.223L32.958 1Z",fill:"#E17726",stroke:"#E17726",strokeWidth:"0.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M2.64233 1L15.7598 11.0041L13.4673 5.22304L2.64233 1Z",fill:"#E27625",stroke:"#E27625",strokeWidth:"0.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M28.2603 23.9878L24.7292 29.4269L32.2207 31.4965L34.4001 24.1195L28.2603 23.9878Z",fill:"#E27625",stroke:"#E27625",strokeWidth:"0.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M1.21973 24.1195L3.38066 31.4965L10.8722 29.4269L7.3526 23.9878L1.21973 24.1195Z",fill:"#E27625",stroke:"#E27625",strokeWidth:"0.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M10.4703 14.8377L8.39551 17.9876L15.8054 18.3159L15.5533 10.3039L10.4703 14.8377Z",fill:"#E27625",stroke:"#E27625",strokeWidth:"0.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M25.1309 14.8382L19.9531 10.1899L19.7715 18.3164L27.1813 17.9881L25.1309 14.8382Z",fill:"#E27625",stroke:"#E27625",strokeWidth:"0.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M10.8721 29.4263L15.3279 27.2045L11.4995 24.181L10.8721 29.4263Z",fill:"#E27625",stroke:"#E27625",strokeWidth:"0.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M20.2715 27.2045L24.7273 29.4263L24.0999 24.181L20.2715 27.2045Z",fill:"#E27625",stroke:"#E27625",strokeWidth:"0.25",strokeLinecap:"round",strokeLinejoin:"round"})]})},{id:"phantomMulti",name:"Phantom",chain:"Solana",supportedChains:["Solana"],isInstalled:!1,icon:(0,o.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 128 128",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("rect",{width:"128",height:"128",rx:"64",fill:"url(#paint0_linear)"}),(0,o.jsx)("path",{d:"M110.584 64.9142H99.142C99.142 41.7651 80.453 23 57.3931 23C36.6215 23 19.2452 37.9158 15.7773 57.7207C15.0179 62.6645 14.8937 67.0538 15.0841 70.9177C15.2744 74.3786 15.8333 77.8394 16.7678 81.0524C16.8629 81.147 16.9579 81.3361 17.053 81.4308C17.1481 81.5254 17.1481 81.5254 17.2431 81.6201C18.1777 83.0389 19.2975 84.0799 20.5124 84.0799H39.9639C40.3427 84.0799 40.6265 83.7964 40.6265 83.4182C40.6265 83.2291 40.5314 83.04 40.4364 82.9454C39.1265 81.3361 38.2869 79.4404 37.9268 77.4502C37.5667 75.2694 37.6618 73.0887 38.1919 70.9177C40.0609 62.0958 47.877 55.5399 57.2981 55.5399C67.6618 55.5399 76.1902 64.1551 76.1902 74.6621C76.1902 75.46 76.1331 76.3213 76.019 77.1718C75.905 77.9697 76.4734 78.7041 77.266 78.8196L87.4161 80.1062C87.5539 80.1271 87.6917 80.1271 87.8296 80.1062C88.5699 80.0115 89.0999 79.3483 89.0049 78.5895C88.905 77.7799 88.8526 76.9703 88.8526 76.1399C88.8526 68.1423 84.1972 61.0494 77.1995 57.5884V57.5884C77.0095 57.4939 76.8145 57.3992 76.6195 57.3046C76.4245 57.2099 76.3294 57.0208 76.3294 56.7373C76.3294 56.5482 76.3294 56.3591 76.4245 56.2644C76.5195 56.1698 76.7145 56.0751 76.9095 56.0751C87.3399 57.7787 95.2232 65.7578 98.0844 76.1608C98.3492 77.1809 99.2647 77.9012 100.308 77.9012H110.584C111.387 77.9012 112 77.2223 112 76.4128V66.4234C112 65.6347 111.387 64.9142 110.584 64.9142Z",fill:"white"}),(0,o.jsx)("defs",{children:(0,o.jsxs)("linearGradient",{id:"paint0_linear",x1:"64",y1:"0",x2:"64",y2:"128",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#534BB1"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#551BF9"})]})})]})},{id:"walletconnect",name:"WalletConnect",chain:"Multi-Chain",supportedChains:["Ethereum","Polygon","BNB Chain","Solana"],isInstalled:!0,icon:(0,o.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M96 48C96 74.51 74.51 96 48 96C21.49 96 0 74.51 0 48C0 21.49 21.49 0 48 0C74.51 0 96 21.49 96 48Z",fill:"#3396FF"}),(0,o.jsx)("path",{d:"M24.42 32.5C35.1486 21.7714 52.2514 21.7714 62.98 32.5L63.8512 33.3712C64.2174 33.7374 64.2174 34.3317 63.8512 34.6979L59.3754 39.1737C59.1923 39.3568 58.8952 39.3568 58.7121 39.1737L57.5172 37.9788C50.0469 30.5085 37.3531 30.5085 29.8828 37.9788L28.5879 39.2737C28.4048 39.4568 28.1077 39.4568 27.9246 39.2737L23.4488 34.7979C23.0826 34.4317 23.0826 33.8374 23.4488 33.4712L24.42 32.5ZM70.68 40.2L74.5684 44.0884C74.9346 44.4546 74.9346 45.0489 74.5684 45.4151L54.4496 65.5339C54.0834 65.9001 53.4891 65.9001 53.1229 65.5339L39.2491 51.6601C39.1575 51.5685 39.0043 51.5685 38.9127 51.6601L25.0389 65.5339C24.6727 65.9001 24.0784 65.9001 23.7122 65.5339L3.59343 45.4151C3.22724 45.0489 3.22724 44.4546 3.59343 44.0884L7.48185 40.2C7.84804 39.8338 8.44233 39.8338 8.80852 40.2L22.6823 54.0739C22.7739 54.1655 22.9271 54.1655 23.0187 54.0739L36.8925 40.2C37.2587 39.8338 37.853 39.8338 38.2192 40.2L52.093 54.0739C52.1846 54.1655 52.3378 54.1655 52.4294 54.0739L66.3032 40.2C66.6694 39.8338 67.2637 39.8338 67.6299 40.2H70.68Z",fill:"white"})]})}]),[m,h]=(0,a.useState)(""),[p,w]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),[y,x]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null);(0,a.useEffect)(()=>((async()=>{try{console.log("Checking for installed wallets...");let e=window.ethereum&&(window.ethereum.isMetaMask||window.ethereum.providers&&window.ethereum.providers.some(e=>e.isMetaMask)),t=window.solana&&window.solana.isPhantom;console.log("Wallet availability:",{metamask:e,phantom:t}),u(n=>n.map(n=>"metamask"===n.id?{...n,isInstalled:e}:"phantomMulti"===n.id?{...n,isInstalled:t}:n))}catch(e){console.error("Error checking wallet availability:",e),h("Failed to detect wallets. Please refresh the page and try again.")}})(),()=>{console.log("WalletSelector component unmounting")}),[]),(0,a.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&C()};return document.addEventListener("mousedown",e),document.body.style.overflow="hidden",()=>{document.removeEventListener("mousedown",e),document.body.style.overflow="auto"}},[]);let j=async e=>{console.log("Attempting to connect to ".concat(e,"...")),h(""),w(!0),f(e);try{if("metamask"===e){let e=s.find(e=>"metaMask"===e.id);if(e){console.log("Connecting with wagmi MetaMask connector...");try{let o=await n({connector:e});if(null==o?void 0:o.account){console.log("Wagmi connection successful:",o),(0,l.cF)("metamask",[o.account]),localStorage.setItem("userInitiatedConnection","true");let e=new CustomEvent("wallet-connection-changed",{detail:{timestamp:Date.now(),walletType:"metamask"}});window.dispatchEvent(e),setTimeout(()=>{"function"==typeof t&&t()},500);return}}catch(e){console.error("Wagmi connection failed, falling back to direct connection:",e)}}let o=await (0,l.uV)();console.log("MetaMask accounts:",o),(0,l.cF)("metamask",o),localStorage.setItem("userInitiatedConnection","true");let a=new CustomEvent("wallet-connection-changed",{detail:{timestamp:Date.now(),walletType:"metamask"}});window.dispatchEvent(a),console.log("Dispatched wallet-connection-changed event from WalletSelector"),setTimeout(()=>{console.log("Connection successful, closing wallet selector"),"function"==typeof t?t():console.error("onClose is not a function:",t)},500)}else"phantomMulti"===e?x(!0):"walletconnect"===e&&(h("WalletConnect integration coming soon!"),w(!1))}catch(t){console.error("Error connecting to ".concat(e,":"),t),h("Failed to connect: ".concat(t.message||"Unknown error")),w(!1),f(null)}},C=()=>{console.log("Closing wallet selector modal"),"function"==typeof t?t():console.error("onClose is not a function:",t)},k=g?d.filter(e=>e.id===g):d;return y?(0,o.jsx)(i,{onClose:()=>{x(!1),"function"==typeof t?t():console.error("onClose is not a function:",t)}}):(0,o.jsxs)("div",{ref:c,className:"p-6 wallet-selector",style:{position:"relative",zIndex:1e4},children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsx)("h2",{className:"text-xl font-bold",children:"Connect Wallet"}),(0,o.jsx)("button",{onClick:C,className:"text-gray-500 hover:text-gray-700 p-2","aria-label":"Close",children:"✕"})]}),(0,o.jsx)("div",{className:"mb-4 text-sm text-gray-600",children:g?p?"Connecting to ".concat("metamask"===g?"MetaMask":"phantomMulti"===g?"Phantom":"WalletConnect","..."):"":"Select a wallet to connect with"}),m&&(0,o.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md",children:m}),(0,o.jsx)("div",{className:"space-y-3",children:k.map(e=>(0,o.jsxs)("div",{className:"p-4 border rounded-lg flex justify-between items-center ".concat(e.isInstalled?p&&g===e.id?"metamask"===e.id?"border-orange-300 bg-gradient-to-r from-amber-50 to-orange-50":"phantomMulti"===e.id?"border-indigo-300 bg-gradient-to-r from-indigo-50 to-purple-50":"border-blue-300 bg-gradient-to-r from-blue-50 to-sky-50":"metamask"===e.id?"border-orange-200 hover:border-orange-500 hover:shadow-md cursor-pointer transition-all bg-gradient-to-r from-amber-50 to-orange-50":"phantomMulti"===e.id?"border-indigo-200 hover:border-indigo-500 hover:shadow-md cursor-pointer transition-all bg-gradient-to-r from-indigo-50 to-purple-50":"border-blue-200 hover:border-blue-500 hover:shadow-md cursor-pointer transition-all bg-gradient-to-r from-blue-50 to-sky-50":"border-gray-200 bg-gray-50 opacity-70"),onClick:()=>e.isInstalled&&!p&&j(e.id),children:[(0,o.jsxs)("div",{className:"flex items-center flex-1",children:[(0,o.jsx)("div",{className:"w-10 h-10 flex-shrink-0 rounded-full flex items-center justify-center bg-white",children:e.icon}),(0,o.jsxs)("div",{className:"ml-3 flex-1",children:[(0,o.jsx)("div",{className:"font-medium ".concat("metamask"===e.id?"text-orange-900":"phantomMulti"===e.id?"text-indigo-900":"text-blue-900"),children:e.name}),(0,o.jsx)("div",{className:"text-sm ".concat("metamask"===e.id?"text-orange-700":"phantomMulti"===e.id?"text-indigo-700":"text-blue-700"),children:e.chain})]}),(0,o.jsx)("div",{className:"ml-3 text-xs flex flex-wrap justify-end gap-1 max-w-[120px]",children:e.supportedChains.map((e,t)=>(0,o.jsx)("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-600",children:e},t))})]}),(0,o.jsx)("div",{className:"ml-3",children:e.isInstalled?p&&g===e.id?(0,o.jsx)("span",{className:"inline-block w-5 h-5 border-2 ".concat("metamask"===e.id?"border-orange-500":"phantomMulti"===e.id?"border-indigo-500":"border-blue-500"," border-t-transparent rounded-full animate-spin")}):(0,o.jsx)("button",{className:"px-3 py-1 rounded-full text-xs ".concat("metamask"===e.id?"bg-orange-100 text-orange-800":"phantomMulti"===e.id?"bg-indigo-100 text-indigo-800":"bg-blue-100 text-blue-800"),children:"Connect"}):(0,o.jsx)("button",{className:"px-3 py-1 rounded-full text-xs bg-gray-200 text-gray-600 cursor-not-allowed",children:"Install"})})]},e.id))}),(0,o.jsx)("div",{className:"mt-6 text-center text-sm text-gray-500",children:(0,o.jsxs)("p",{children:["By connecting a wallet, you agree to our ",(0,o.jsx)("a",{href:"/terms-of-service",className:"text-blue-600 hover:underline",children:"Terms of Service"})," and acknowledge that you have read and understand our ",(0,o.jsx)("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline",children:"Privacy Policy"}),"."]})})]})}},1263:function(e,t,n){n.d(t,{HG:function(){return l},N7:function(){return r},ez:function(){return o},jR:function(){return i},nu:function(){return s},p2:function(){return c},zM:function(){return a}});let o="0xD6bd1eFCE3A2c4737856724f96F39037a3564890",a="0x0000000000000000000000000000000000000456",l={STANDARD:0,THRESHOLD:1,MAXIMUM:2,ZERO_KNOWLEDGE:3},s={STANDARD:0,THRESHOLD:1,MAXIMUM:2},i=[{id:"one_day",label:"1 Day",seconds:86400},{id:"seven_days",label:"7 Days",seconds:604800},{id:"thirty_days",label:"30 Days",seconds:2592e3},{id:"ninety_days",label:"90 Days",seconds:7776e3}],r=[{id:"fund_verification",name:"Fund Verification",template:"I confirm that I have at least {amount} {token_symbol} in my wallet for verification purposes. This verification was created on {date}."},{id:"loan_application",name:"Loan Application",template:"I confirm that I have the required funds for loan application #{reference_number} with {institution_name}."},{id:"investment_qualification",name:"Investment Qualification",template:"I confirm that I meet the financial requirements to participate in the {project_name} investment opportunity."},{id:"membership_verification",name:"Membership Verification",template:"I confirm that I meet the financial requirements for membership in {organization_name}."}],c=[{inputs:[{internalType:"enum ProofOfFunds.ProofType",name:"_proofType",type:"uint8"},{internalType:"bytes32",name:"_proofHash",type:"bytes32"},{internalType:"uint256",name:"_expiryTime",type:"uint256"},{internalType:"uint256",name:"_thresholdAmount",type:"uint256"},{internalType:"string",name:"_signatureMessage",type:"string"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"submitProof",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"getProof",outputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"expiryTime",type:"uint256"},{internalType:"bytes32",name:"proofHash",type:"bytes32"},{internalType:"enum ProofOfFunds.ProofType",name:"proofType",type:"uint8"},{internalType:"uint256",name:"thresholdAmount",type:"uint256"},{internalType:"bool",name:"isRevoked",type:"bool"},{internalType:"string",name:"signatureMessage",type:"string"},{internalType:"bytes",name:"signature",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"uint256",name:"_claimedAmount",type:"uint256"}],name:"verifyStandardProof",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"uint256",name:"_minimumAmount",type:"uint256"}],name:"verifyThresholdProof",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"uint256",name:"_maximumAmount",type:"uint256"}],name:"verifyMaximumProof",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"enum ProofOfFunds.ProofType",name:"_proofType",type:"uint8"}],name:"generateProofHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"string",name:"_reason",type:"string"}],name:"revokeProof",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"isProofValid",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"string",name:"_message",type:"string"}],name:"verifySignature",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}]},2226:function(e,t,n){function o(){return{connect:async e=>{let{connector:t}=e;return console.log("Connecting to ".concat((null==t?void 0:t.name)||"wallet")),{status:"success",account:"0x".concat(Date.now().toString(16).padStart(40,"0"))}},connectAsync:async e=>{let{connector:t}=e;return console.log("Connecting to ".concat((null==t?void 0:t.name)||"wallet"," async")),{status:"success",account:"0x".concat(Date.now().toString(16).padStart(40,"0"))}},status:"ready",error:null,isLoading:!1,isSuccess:!1,isError:!1,connectors:[{id:"metamask",name:"MetaMask",ready:!0,connect:async()=>(console.log("Connecting wallet from useConnect hook"),{account:"0x".concat(Date.now().toString(16).padStart(40,"0")),provider:{isMetaMask:!0},chain:{id:1,name:"Ethereum"}})}]}}function a(){return{disconnect:async()=>(console.log("Disconnecting wallet from useDisconnect hook"),!0),disconnectAsync:async()=>(console.log("Disconnecting wallet async from useDisconnect hook"),!0),isLoading:!1,isSuccess:!1,isError:!1,error:null}}n.d(t,{$4:function(){return o},qL:function(){return a}})},2578:function(e,t,n){function o(){if("undefined"!=typeof localStorage)try{let e=localStorage.getItem("walletData");if(e)return JSON.parse(e)}catch(e){console.error("Error getting connected wallets:",e)}return[]}async function a(e){if(!e)throw Error("Missing wallet object");if(!e.address)throw Error("Invalid wallet object: missing address");if(!e.type)throw Error("Invalid wallet object: missing wallet type");if("undefined"==typeof localStorage)throw Error("Local storage is not available in this environment");try{let t=o(),n=t.findIndex(t=>t.address===e.address&&t.type===e.type);return n>=0?t[n]={...t[n],...e,lastConnected:new Date().toISOString()}:t.push({...e,lastConnected:new Date().toISOString()}),localStorage.setItem("walletData",JSON.stringify(t)),!0}catch(n){let t=Error("Failed to save wallet connection: ".concat(n.message));throw t.originalError=n,t.wallet=e,t}}async function l(){if(!window.ethereum)throw Error("MetaMask is not installed. Please install MetaMask to use this feature.");try{let e=await window.ethereum.request({method:"eth_requestAccounts"});if(!e||0===e.length)throw Error("No accounts found. Please unlock MetaMask and try again.");let t=e[0];if(!t)throw Error("Failed to get wallet address");let n=await window.ethereum.request({method:"eth_chainId"}),o=parseInt(n,16),l="unknown",s={1:"ethereum",5:"goerli",11155111:"sepolia",137:"polygon",80001:"mumbai",42161:"arbitrum",421613:"arbitrum-goerli"};s[o]&&(l=s[o]);let i={address:t,type:"evm",provider:"metamask",chain:l,chainId:o,connected:!0,connectedAt:new Date().toISOString()};return await a(i),i}catch(t){if(4001===t.code)throw Error("Connection rejected by user. Please try again.");if(-32002===t.code)throw Error("A connection request is already pending. Please check MetaMask.");let e=Error("Failed to connect to MetaMask: ".concat(t.message));throw e.originalError=t,e}}async function s(e,t){if(console.log("Disconnecting wallet: ".concat(e," ").concat(t)),window.wagmiDisconnect&&"evm"===e&&await window.wagmiDisconnect(),"undefined"!=typeof localStorage)try{let n=localStorage.getItem("walletData");if(n){let o=JSON.parse(n).filter(n=>!(n.type===e&&n.fullAddress===t));localStorage.setItem("walletData",JSON.stringify(o))}}catch(e){return console.error("Error updating wallet data:",e),!1}return!0}async function i(){return[]}async function r(){return{}}function c(){return"0x0000000000000000000000000000000000000000000000000000000000000000"}async function d(){return{address:"0x0000000000000000000000000000000000000000",privateKey:""}}n.d(t,{Gx:function(){return d},SE:function(){return c},cF:function(){return a},co:function(){return s},dg:function(){return o},ei:function(){return r},i6:function(){return i},uV:function(){return l}})}}]);