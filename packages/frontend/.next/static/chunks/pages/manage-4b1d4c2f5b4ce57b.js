(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[867],{6746:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage",function(){return n(3905)}])},9632:function(e,t,n){"use strict";n.d(t,{HG:function(){return a.HG},N7:function(){return a.N7},ez:function(){return a.ez},jR:function(){return a.jR},nu:function(){return a.nu},p2:function(){return a.p2},zM:function(){return a.zM}});var a=n(1263)},3905:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(2322),r=n(2784),s=n(3053),i=n(9632);function o(){let[e,t]=(0,r.useState)(()=>"true"===localStorage.getItem("userInitiatedConnection")),{address:n,isConnected:o}=(0,s.mA)(),[l,p]=(0,r.useState)([]),[c,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=()=>{t("true"===localStorage.getItem("userInitiatedConnection"))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);let{data:d,refetch:u}=(0,s.do)({address:i.ez,abi:i.p2,functionName:"getUserProofs",args:[n||"0x0000000000000000000000000000000000000000"],enabled:o&&e}),{write:y,isLoading:f}=(0,s.GG)({address:i.ez,abi:i.p2,functionName:"revokeProof"});(0,r.useEffect)(()=>{(async()=>{if(!d||!d.length){p([]),m(!1);return}try{let e=d.map(e=>fetch("https://api-amoy.polygonscan.com/api?module=proxy&action=eth_call&to=".concat(i.ez,"&data=0x<function_signature>000000000000000000000000").concat(e.toString(16).padStart(64,"0"))).then(e=>e.json()).then(t=>({id:Number(e),timestamp:Date.now()-Math.floor(1e7*Math.random()),expiryTime:Date.now()+Math.floor(1e7*Math.random()),proofType:Math.floor(3*Math.random()),thresholdAmount:Math.floor(1e3*Math.random()),isRevoked:!1,signatureMessage:"Sample signature message for proof "+e}))),t=await Promise.all(e);p(t.filter(e=>!e.isRevoked&&e.expiryTime>Date.now()))}catch(e){console.error("Error fetching proof details:",e)}finally{m(!1)}})()},[d,o]);let h=async e=>{if(o)try{y({args:[e]}),p(t=>t.filter(t=>t.id!==e)),u()}catch(e){console.error("Error revoking proof:",e)}},x=e=>new Date(e).toLocaleString(),b=e=>{switch(e){case 0:return"Standard";case 1:return"Threshold";case 2:return"Maximum";default:return"Unknown"}};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto mt-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Manage Your Proofs"}),o?c?(0,a.jsxs)("div",{className:"card text-center py-8",children:[(0,a.jsx)("h2",{className:"text-xl font-medium mb-4",children:"Loading Proofs..."}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})})]}):0===l.length?(0,a.jsxs)("div",{className:"card text-center py-8",children:[(0,a.jsx)("h2",{className:"text-xl font-medium mb-4",children:"No Active Proofs"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have any active proofs of funds."}),(0,a.jsx)("a",{href:"/create",className:"btn btn-primary",children:"Create New Proof"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-medium",children:"Your Active Proofs"}),(0,a.jsx)("a",{href:"/create",className:"btn btn-primary",children:"Create New Proof"})]}),(0,a.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Type"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Created"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Expires"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Purpose"}),(0,a.jsx)("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:(0,a.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:l.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",children:b(e.proofType)}),(0,a.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:x(e.timestamp)}),(0,a.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:x(e.expiryTime)}),(0,a.jsx)("td",{className:"px-3 py-4 text-sm text-gray-500 max-w-xs truncate",children:e.signatureMessage}),(0,a.jsx)("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:(0,a.jsx)("button",{onClick:()=>h(e.id),className:"text-red-600 hover:text-red-900",children:"Revoke"})})]},e.id))})]})})]}):(0,a.jsxs)("div",{className:"card text-center py-8",children:[(0,a.jsx)("h2",{className:"text-xl font-medium mb-4",children:"Connect Your Wallet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Please connect your wallet to manage your proofs."})]}),(0,a.jsxs)("div",{className:"card mt-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"About Proof Management"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"This dashboard allows you to view and manage all your active proofs of funds on the Polygon blockchain. You can revoke proofs that are no longer needed or create new ones for different purposes."}),(0,a.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mt-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Important Note"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,a.jsx)("p",{children:"Revoking a proof is permanent and cannot be undone. Once revoked, a proof can no longer be verified by third parties."})})]})]})})]})]})}},1263:function(e,t,n){"use strict";n.d(t,{HG:function(){return s},N7:function(){return l},ez:function(){return a},jR:function(){return o},nu:function(){return i},p2:function(){return p},zM:function(){return r}});let a="0xD6bd1eFCE3A2c4737856724f96F39037a3564890",r="0x0000000000000000000000000000000000000456",s={STANDARD:0,THRESHOLD:1,MAXIMUM:2,ZERO_KNOWLEDGE:3},i={STANDARD:0,THRESHOLD:1,MAXIMUM:2},o=[{id:"one_day",label:"1 Day",seconds:86400},{id:"seven_days",label:"7 Days",seconds:604800},{id:"thirty_days",label:"30 Days",seconds:2592e3},{id:"ninety_days",label:"90 Days",seconds:7776e3}],l=[{id:"fund_verification",name:"Fund Verification",template:"I confirm that I have at least {amount} {token_symbol} in my wallet for verification purposes. This verification was created on {date}."},{id:"loan_application",name:"Loan Application",template:"I confirm that I have the required funds for loan application #{reference_number} with {institution_name}."},{id:"investment_qualification",name:"Investment Qualification",template:"I confirm that I meet the financial requirements to participate in the {project_name} investment opportunity."},{id:"membership_verification",name:"Membership Verification",template:"I confirm that I meet the financial requirements for membership in {organization_name}."}],p=[{inputs:[{internalType:"enum ProofOfFunds.ProofType",name:"_proofType",type:"uint8"},{internalType:"bytes32",name:"_proofHash",type:"bytes32"},{internalType:"uint256",name:"_expiryTime",type:"uint256"},{internalType:"uint256",name:"_thresholdAmount",type:"uint256"},{internalType:"string",name:"_signatureMessage",type:"string"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"submitProof",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"getProof",outputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"expiryTime",type:"uint256"},{internalType:"bytes32",name:"proofHash",type:"bytes32"},{internalType:"enum ProofOfFunds.ProofType",name:"proofType",type:"uint8"},{internalType:"uint256",name:"thresholdAmount",type:"uint256"},{internalType:"bool",name:"isRevoked",type:"bool"},{internalType:"string",name:"signatureMessage",type:"string"},{internalType:"bytes",name:"signature",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"uint256",name:"_claimedAmount",type:"uint256"}],name:"verifyStandardProof",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"uint256",name:"_minimumAmount",type:"uint256"}],name:"verifyThresholdProof",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"uint256",name:"_maximumAmount",type:"uint256"}],name:"verifyMaximumProof",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"enum ProofOfFunds.ProofType",name:"_proofType",type:"uint8"}],name:"generateProofHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"string",name:"_reason",type:"string"}],name:"revokeProof",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"isProofValid",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"string",name:"_message",type:"string"}],name:"verifySignature",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}]}},function(e){e.O(0,[53,888,774,179],function(){return e(e.s=6746)}),_N_E=e.O()}]);